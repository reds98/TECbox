{"version":3,"sources":["./src/app/shared/shared.module.ts","./src/app/table/table.component.ts","./src/app/table/table.component.html"],"names":[],"mappings":"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","file":"default~cellar-view-cellar-view-module~client-view-client-view-module-es2015.js","sourcesContent":["// This module is to allow using a shared component in multiple different modules\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableComponent } from '../table/table.component'\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\n\n\n\n@NgModule({\n  declarations: [TableComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  exports: [TableComponent]\n})\nexport class SharedModule { }\n","import { Component, OnInit, ViewChild, Input } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule, FormControl, FormGroup} from '@angular/forms';\n\ndeclare var $;\n\n\n@Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.css']\n})\n\nexport class TableComponent implements OnInit {\n\n  constructor(private httpService: HttpClient) { }\n  \n  // Attributes\n  productArray;\n  selectedItem;\n  newProduct =false;\n  emptyField = false;\n\n  objectValues = Object.values;\n  objectKeys = Object.keys;\n\n  // Child attributes\n  @Input() columns = null;\n  @Input() data = null;\n\n  \n  // Runs first\n  ngOnInit () {\n    // Parse Json from server\n    this.data = JSON.parse(localStorage.getItem('tableData'));\n    \n    console.log(this.data);\n    this.selectedItem = null;\n    this.productArray = null;\n    this.productArray = this.data;\n\n    this.initTable();\n    this.selectItems();\n    this.deleteItems();\n    this.initPopovers();\n    this.initForm();\n    }\n\n\n  // Initializes Data table structure \n  initTable(){\n    $(document).ready(function() {\n      $('#cellerTable').DataTable( {\n      \"bPaginate\": false,\n      \"bLengthChange\": false,\n      \"bFilter\": true,\n      \"bInfo\": false,\n      } );\n    } );\n  }\n    \n  // Initializes popovers\n  initPopovers(){ \n    $(document).ready(function(){\n      $('[data-toggle=\"popover\"]').popover({\n          placement : 'left',\n          trigger : 'hover'\n      });\n    });\n    $(\"#saveBtn\").attr('visible', 'false');\n  }\n\n  // Creates form\n  userForm = new FormGroup({});\n\n  initForm(){\n    for(var i = 0; i < this.columns.length; i++){\n      this.userForm.addControl(this.columns[i], new FormControl());\n    }\n  };\n\n  // Method for selecting rows in table\n  selectItems(){\n    $(document).ready(function() {\n      var table = $('#cellerTable').DataTable();\n    \n      $('#cellerTable tbody').on( 'click', 'tr', function () {\n          if ( $(this).hasClass('selected') ) {\n              $(this).removeClass('selected');\n          }\n          else {\n              table.$('tr.selected').removeClass('selected');\n              $(this).addClass('selected');\n          }\n      } );\n  } );\n  }\n\n\n  // Deletes selected row\n  deleteItems(){\n    $('#deleteBtn').click( function () {\n      $('#cellerTable').DataTable().row('.selected').remove().draw( false );\n  } );\n  }\n\n\n  // Checks for empty fields in form and adds the inputs to a lists\n  checkForm(){\n    for(var i = 0; i < this.columns.length; i++){\n      if(this.userForm.get(this.columns[i]).value == null){\n        this.emptyField = true;\n      }\n      else if(!this.userForm.get(this.columns[i]).value.emptyField){\n        this.emptyField = false;\n      }\n    }\n    if(this.emptyField == false){\n      var list:any = [];\n      for(var i = 0; i < this.columns.length; i++){\n        list.push(this.userForm.get(this.columns[i]).value);\n      }\n      this.addProduct(list, 0);\n      this.newProduct = !this.newProduct;\n    }\n  }\n\n\n  // Opens form for submiting new product\n  newItem():void{\n    this.newProduct = !this.newProduct;\n    this.selectedItem = Object.entries(this.productArray[0]).map(item=>{return [this.productArray[0],\"\"]});\n  }\n\n\n  // Enables editing of rows\n  editItem(){\n    $(\"#cellerTable\").closest('div').attr('contenteditable', 'true');\n    $(\"#cellerTable\").closest('div').focus();\n    $(\"#saveBtn\").show();\n  }\n\n  // Disenables editing of rows\n  saveEdit(){\n    $(\"#cellerTable\").closest('div').attr('contenteditable', 'false');\n    $(\"#saveBtn\").hide();              \n    var table = $('#cellerTable').DataTable();\n\n    table\n        .rows()\n        .invalidate()\n        .draw();\n  }\n\n\n  // Adds new product to the table\n  addProduct(list, i){\n\n    var table = (<HTMLTableElement>document.getElementById('cellerTable'));\n\n    var row = table.insertRow(-1);\n    while(i < this.columns.length){\n    var cell = row.insertCell(i);\n    cell.innerHTML = list[i];\n    i++;\n    }\n  }\n}","<!-- Creates the table which will contain the columns and data provided by parent when implemented -->\n<div>\n    <h1>\n    </h1>\n    <ul class=\"list-group\">\n    <table id=\"cellerTable\" class=\"table table-striped table-hover\">\n        <thead>\n            <tr>\n                <th scope=\"col\" *ngFor=\"let column of columns\">{{column}}</th>\n            </tr>\n        </thead>\n        \n        <tbody>\n            <tr *ngFor=\"let product of productArray\" id=\"row\">\n                <td *ngFor=\"let attribute of objectValues(product)\">{{attribute}}</td>\n            </tr>\n        </tbody>\n    </table>\n\n    <!-- Add buttons for edit, delete, add and save -->\n    <div>\n        <button type=\"button\" class=\"btn deleteBtn ml-2\" id=\"deleteBtn\"\n        data-toggle=\"popover\" title=\"Eliminar\" data-content=\"Si elimina este elemento, no podrá recuperarlo\">\n            <i class=\"fa fa-trash\"></i>\n        </button>\n        <button type=\"button\" (click)=\"editItem()\" class=\"btn editBtn ml-2\" data-toggle=\"popover\" title=\"Editar\"\n        data-content=\"¿Desea editar este elemento?\">><i class=\"fa fa-edit\" id=\"editBtn\"></i></button>\n        <button (click)=\"newItem()\" type=\"button\" class=\"btn myBtn ml-2\"><i class=\"fa fa-plus\"></i></button>\n        <button (click)=\"saveEdit()\" type=\"button\" class=\"btn myBtn ml-2\" id=\"saveBtn\" style=\"display: none;\"><i class=\"fa fa-save\"></i></button>\n    </div>\n\n    <!-- Displays form to add product -->\n    <div *ngIf=\"newProduct\" class=\"container ml-2\">\n        <h2>Detalles</h2>\n\n        <form [formGroup]=\"userForm\">\n            <div class=\"form-group\" *ngFor=\"let attribute of columns\">\n              <input formControlName={{attribute}} placeholder={{attribute}} type=\"text\">\n            </div>\n        \n            <div>\n                <div *ngIf=\"emptyField\" style=\"color:red\" >Todos los campos son obligatorios.</div>\n              <button (click)=checkForm() class=\"btn myBtn\" type=\"button\">Agregar</button>\t\n            </div>\n           </form>\n    </div>\n</ul>\n</div>\n\n\n"],"sourceRoot":"webpack:///"}