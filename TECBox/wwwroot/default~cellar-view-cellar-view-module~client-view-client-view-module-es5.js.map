{"version":3,"sources":["webpack:///src/app/shared/shared.module.ts","webpack:///src/app/table/table.component.ts","webpack:///src/app/table/table.component.html"],"names":["SharedModule","declarations","imports","exports","TableComponent","httpService","newProduct","emptyField","objectValues","Object","values","objectKeys","keys","columns","data","userForm","JSON","parse","localStorage","getItem","console","log","selectedItem","productArray","initTable","selectItems","deleteItems","initPopovers","initForm","$","document","ready","DataTable","popover","placement","trigger","attr","i","length","addControl","table","on","hasClass","removeClass","addClass","click","row","remove","draw","get","value","list","push","addProduct","entries","map","item","closest","focus","show","hide","rows","invalidate","getElementById","insertRow","cell","insertCell","innerHTML","editItem","newItem","saveEdit","selector","templateUrl","styleUrls"],"mappings":"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","file":"default~cellar-view-cellar-view-module~client-view-client-view-module-es5.js","sourcesContent":["// This module is to allow using a shared component in multiple different modules\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableComponent } from '../table/table.component'\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\n\n\n\n@NgModule({\n  declarations: [TableComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  exports: [TableComponent]\n})\nexport class SharedModule { }\n","import { Component, OnInit, ViewChild, Input } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule, FormControl, FormGroup} from '@angular/forms';\n\ndeclare var $;\n\n\n@Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.css']\n})\n\nexport class TableComponent implements OnInit {\n\n  constructor(private httpService: HttpClient) { }\n  \n  // Attributes\n  productArray;\n  selectedItem;\n  newProduct =false;\n  emptyField = false;\n\n  objectValues = Object.values;\n  objectKeys = Object.keys;\n\n  // Child attributes\n  @Input() columns = null;\n  @Input() data = null;\n\n  \n  // Runs first\n  ngOnInit () {\n    // Parse Json from server\n    this.data = JSON.parse(localStorage.getItem('tableData'));\n    \n    console.log(this.data);\n    this.selectedItem = null;\n    this.productArray = null;\n    this.productArray = this.data;\n\n    this.initTable();\n    this.selectItems();\n    this.deleteItems();\n    this.initPopovers();\n    this.initForm();\n    }\n\n\n  // Initializes Data table structure \n  initTable(){\n    $(document).ready(function() {\n      $('#cellerTable').DataTable( {\n      \"bPaginate\": false,\n      \"bLengthChange\": false,\n      \"bFilter\": true,\n      \"bInfo\": false,\n      } );\n    } );\n  }\n    \n  // Initializes popovers\n  initPopovers(){ \n    $(document).ready(function(){\n      $('[data-toggle=\"popover\"]').popover({\n          placement : 'left',\n          trigger : 'hover'\n      });\n    });\n    $(\"#saveBtn\").attr('visible', 'false');\n  }\n\n  // Creates form\n  userForm = new FormGroup({});\n\n  initForm(){\n    for(var i = 0; i < this.columns.length; i++){\n      this.userForm.addControl(this.columns[i], new FormControl());\n    }\n  };\n\n  // Method for selecting rows in table\n  selectItems(){\n    $(document).ready(function() {\n      var table = $('#cellerTable').DataTable();\n    \n      $('#cellerTable tbody').on( 'click', 'tr', function () {\n          if ( $(this).hasClass('selected') ) {\n              $(this).removeClass('selected');\n          }\n          else {\n              table.$('tr.selected').removeClass('selected');\n              $(this).addClass('selected');\n          }\n      } );\n  } );\n  }\n\n\n  // Deletes selected row\n  deleteItems(){\n    $('#deleteBtn').click( function () {\n      $('#cellerTable').DataTable().row('.selected').remove().draw( false );\n  } );\n  }\n\n\n  // Checks for empty fields in form and adds the inputs to a lists\n  checkForm(){\n    for(var i = 0; i < this.columns.length; i++){\n      if(this.userForm.get(this.columns[i]).value == null){\n        this.emptyField = true;\n      }\n      else if(!this.userForm.get(this.columns[i]).value.emptyField){\n        this.emptyField = false;\n      }\n    }\n    if(this.emptyField == false){\n      var list:any = [];\n      for(var i = 0; i < this.columns.length; i++){\n        list.push(this.userForm.get(this.columns[i]).value);\n      }\n      this.addProduct(list, 0);\n      this.newProduct = !this.newProduct;\n    }\n  }\n\n\n  // Opens form for submiting new product\n  newItem():void{\n    this.newProduct = !this.newProduct;\n    this.selectedItem = Object.entries(this.productArray[0]).map(item=>{return [this.productArray[0],\"\"]});\n  }\n\n\n  // Enables editing of rows\n  editItem(){\n    $(\"#cellerTable\").closest('div').attr('contenteditable', 'true');\n    $(\"#cellerTable\").closest('div').focus();\n    $(\"#saveBtn\").show();\n  }\n\n  // Disenables editing of rows\n  saveEdit(){\n    $(\"#cellerTable\").closest('div').attr('contenteditable', 'false');\n    $(\"#saveBtn\").hide();              \n    var table = $('#cellerTable').DataTable();\n\n    table\n        .rows()\n        .invalidate()\n        .draw();\n  }\n\n\n  // Adds new product to the table\n  addProduct(list, i){\n\n    var table = (<HTMLTableElement>document.getElementById('cellerTable'));\n\n    var row = table.insertRow(-1);\n    while(i < this.columns.length){\n    var cell = row.insertCell(i);\n    cell.innerHTML = list[i];\n    i++;\n    }\n  }\n}","<!-- Creates the table which will contain the columns and data provided by parent when implemented -->\n<div>\n    <h1>\n    </h1>\n    <ul class=\"list-group\">\n    <table id=\"cellerTable\" class=\"table table-striped table-hover\">\n        <thead>\n            <tr>\n                <th scope=\"col\" *ngFor=\"let column of columns\">{{column}}</th>\n            </tr>\n        </thead>\n        \n        <tbody>\n            <tr *ngFor=\"let product of productArray\" id=\"row\">\n                <td *ngFor=\"let attribute of objectValues(product)\">{{attribute}}</td>\n            </tr>\n        </tbody>\n    </table>\n\n    <!-- Add buttons for edit, delete, add and save -->\n    <div>\n        <button type=\"button\" class=\"btn deleteBtn ml-2\" id=\"deleteBtn\"\n        data-toggle=\"popover\" title=\"Eliminar\" data-content=\"Si elimina este elemento, no podrá recuperarlo\">\n            <i class=\"fa fa-trash\"></i>\n        </button>\n        <button type=\"button\" (click)=\"editItem()\" class=\"btn editBtn ml-2\" data-toggle=\"popover\" title=\"Editar\"\n        data-content=\"¿Desea editar este elemento?\">><i class=\"fa fa-edit\" id=\"editBtn\"></i></button>\n        <button (click)=\"newItem()\" type=\"button\" class=\"btn myBtn ml-2\"><i class=\"fa fa-plus\"></i></button>\n        <button (click)=\"saveEdit()\" type=\"button\" class=\"btn myBtn ml-2\" id=\"saveBtn\" style=\"display: none;\"><i class=\"fa fa-save\"></i></button>\n    </div>\n\n    <!-- Displays form to add product -->\n    <div *ngIf=\"newProduct\" class=\"container ml-2\">\n        <h2>Detalles</h2>\n\n        <form [formGroup]=\"userForm\">\n            <div class=\"form-group\" *ngFor=\"let attribute of columns\">\n              <input formControlName={{attribute}} placeholder={{attribute}} type=\"text\">\n            </div>\n        \n            <div>\n                <div *ngIf=\"emptyField\" style=\"color:red\" >Todos los campos son obligatorios.</div>\n              <button (click)=checkForm() class=\"btn myBtn\" type=\"button\">Agregar</button>\t\n            </div>\n           </form>\n    </div>\n</ul>\n</div>\n\n\n"]}